# UnityVerseBridge

Quest VR í—¤ë“œì…‹ê³¼ ëª¨ë°”ì¼ ê¸°ê¸° ê°„ì˜ ì‹¤ì‹œê°„ WebRTC í†µì‹ ì„ êµ¬í˜„í•œ Unity ê¸°ë°˜ ë¸Œë¦¿ì§€ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

UnityVerseBridgeëŠ” Meta Quest VR í™˜ê²½ê³¼ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ WebRTC ê¸°ìˆ ë¡œ ì—°ê²°í•˜ì—¬, VR í™”ë©´ì„ ëª¨ë°”ì¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°í•˜ê³  ëª¨ë°”ì¼ í„°ì¹˜ ì…ë ¥ì„ VR ê³µê°„ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” í†µí•© ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Quest App     â”‚     â”‚ Signaling Server â”‚     â”‚   Mobile App    â”‚
â”‚  (ë¹„ë””ì˜¤ ì†¡ì‹ )   â”‚â—„â”€â”€â”€â”€â”¤   (WebSocket)    â”œâ”€â”€â”€â”€â–ºâ”‚  (ë¹„ë””ì˜¤ ìˆ˜ì‹ )   â”‚
â”‚  (í„°ì¹˜ ìˆ˜ì‹ )     â”‚     â”‚   (ì¤‘ê³„ ì„œë²„)    â”‚     â”‚  (í„°ì¹˜ ì†¡ì‹ )     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                â”‚
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      Core        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ (WebRTC Package) â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì €ì¥ì†Œ êµ¬ì¡°

- **[core](https://github.com/UnityVerseBridge/core)**: WebRTC ë° ì‹œê·¸ë„ë§ ê³µí†µ ëª¨ë“ˆ (Unity Package)
- **[quest-app](https://github.com/UnityVerseBridge/quest-app)**: Quest ë””ë°”ì´ìŠ¤ìš© Unity ì•±
- **[mobile-app](https://github.com/UnityVerseBridge/mobile-app)**: ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ìš© Unity ì•±  
- **[signaling-server](https://github.com/UnityVerseBridge/signaling-server)**: WebSocket ê¸°ë°˜ ì‹œê·¸ë„ë§ ì„œë²„

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°
- Quest VR ì¹´ë©”ë¼ ë·°ë¥¼ ëª¨ë°”ì¼ë¡œ ì‹¤ì‹œê°„ ì „ì†¡
- RenderTexture ê¸°ë°˜ ê³ í’ˆì§ˆ ìŠ¤íŠ¸ë¦¬ë°
- ì ì‘í˜• ë¹„íŠ¸ë ˆì´íŠ¸ ë° í•´ìƒë„ ì¡°ì •

**ì‘ë™ ì›ë¦¬**: Questì˜ VR ì¹´ë©”ë¼ê°€ ë Œë”ë§í•˜ëŠ” í™”ë©´ì„ RenderTextureë¡œ ìº¡ì²˜í•©ë‹ˆë‹¤. ì´ í…ìŠ¤ì²˜ëŠ” Unity WebRTCì˜ VideoStreamTrackìœ¼ë¡œ ë³€í™˜ë˜ì–´ H.264 ì½”ë±ìœ¼ë¡œ ì¸ì½”ë”©ë©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ìƒíƒœì— ë”°ë¼ ë¹„íŠ¸ë ˆì´íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ëŠê¹€ ì—†ëŠ” ìŠ¤íŠ¸ë¦¬ë°ì„ ë³´ì¥í•©ë‹ˆë‹¤.

### í„°ì¹˜ ì…ë ¥ ì œì–´
- ëª¨ë°”ì¼ í„°ì¹˜ë¥¼ VR 3D ê³µê°„ ì¢Œí‘œë¡œ ë³€í™˜
- ì •ê·œí™”ëœ ì¢Œí‘œ ì‹œìŠ¤í…œ (0-1)
- VR UI ë° 3D ì˜¤ë¸Œì íŠ¸ ìƒí˜¸ì‘ìš©

**ë³€í™˜ ê³¼ì •**: 
1. ëª¨ë°”ì¼ í™”ë©´ì˜ í„°ì¹˜ ì¢Œí‘œë¥¼ í™”ë©´ í¬ê¸°ë¡œ ë‚˜ëˆ„ì–´ 0-1 ë²”ìœ„ë¡œ ì •ê·œí™”
2. WebRTC DataChannelì„ í†µí•´ JSON í˜•ì‹ìœ¼ë¡œ ì „ì†¡
3. Questì—ì„œ ì •ê·œí™”ëœ ì¢Œí‘œë¥¼ ì¹´ë©”ë¼ viewport ì¢Œí‘œë¡œ ë³€í™˜
4. Camera.ViewportPointToRay()ë¡œ 3D ê³µê°„ì˜ Ray ìƒì„±
5. Physics.Raycast()ë¡œ ì¶©ëŒ ì§€ì  ê³„ì‚°

### í–…í‹± í”¼ë“œë°±
- Quest â†’ Mobile ì§„ë™ ëª…ë ¹ ì „ì†¡
- í”Œë«í¼ë³„ í–…í‹± API í†µí•©
- ì‹¤ì‹œê°„ í”¼ë“œë°± ë™ê¸°í™”

**êµ¬í˜„ ë°©ì‹**: Quest ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì…ë ¥ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ í–…í‹± ê°•ë„ì™€ ì§€ì† ì‹œê°„ì„ DataChannelë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ëª¨ë°”ì¼ ì•±ì€ í”Œë«í¼ë³„ API(iOS: UIImpactFeedbackGenerator, Android: Vibrator)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§„ë™ì„ ìƒì„±í•©ë‹ˆë‹¤.

### ë„¤íŠ¸ì›Œí¬ í†µì‹ 
- WebRTC P2P ì—°ê²°ë¡œ ì €ì§€ì—° í†µì‹ 
- ë£¸ ê¸°ë°˜ ìë™ ë§¤ì¹­
- ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë° ìë™ ì¬ì—°ê²°

**P2P ì—°ê²° ê³¼ì •**:
1. ë‘ í”¼ì–´ê°€ ì‹œê·¸ë„ë§ ì„œë²„ì˜ ê°™ì€ ë£¸ì— ì°¸ê°€
2. Quest(Offerer)ê°€ RTCPeerConnection ìƒì„± ë° Offer SDP ìƒì„±
3. ì‹œê·¸ë„ë§ ì„œë²„ë¥¼ í†µí•´ Mobile(Answerer)ë¡œ Offer ì „ë‹¬
4. Mobileì´ Answer SDP ìƒì„± ë° ì „ì†¡
5. ICE candidate êµí™˜ìœ¼ë¡œ ìµœì  ê²½ë¡œ íƒìƒ‰
6. STUN ì„œë²„ë¥¼ í†µí•œ ê³µì¸ IP íšë“
7. P2P ì—°ê²° ìˆ˜ë¦½ í›„ ì‹œê·¸ë„ë§ ì„œë²„ ì—°ê²° ë¶ˆí•„ìš”

## ğŸ’» ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### ê°œë°œ í™˜ê²½
- **Unity**: 6000.0.33f1 (Unity 6 LTS) ë˜ëŠ” 2022.3.34f1 LTS
- **Unity WebRTC**: 3.0.0-pre.8 ì´ìƒ
- **Node.js**: 16.x ì´ìƒ (ì‹œê·¸ë„ë§ ì„œë²„)

### í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

#### Quest ê¸°ê¸°
- Meta Quest 2, Quest 3, Quest Pro
- ê°œë°œì ëª¨ë“œ í™œì„±í™” í•„ìš”

#### ëª¨ë°”ì¼ ê¸°ê¸°
- **iOS**: iOS 12.0 ì´ìƒ
- **Android**: API Level 26 (Android 8.0) ì´ìƒ

#### ì„œë²„
- WebSocket ì§€ì›
- í¬íŠ¸ ì„¤ì • ê°€ëŠ¥ (.env íŒŒì¼)
- ê³µìš© IP ë˜ëŠ” ë¡œì»¬ ë„¤íŠ¸ì›Œí¬

## ğŸ“¦ ì„¤ì¹˜ ë° ì„¤ì •

### 1. í”„ë¡œì íŠ¸ í´ë¡ 

ê° ì €ì¥ì†Œë¥¼ ê°œë³„ì ìœ¼ë¡œ í´ë¡ í•©ë‹ˆë‹¤:

```bash
# Core íŒ¨í‚¤ì§€
git clone https://github.com/UnityVerseBridge/core.git

# Quest ì•±
git clone https://github.com/UnityVerseBridge/quest-app.git

# ëª¨ë°”ì¼ ì•±
git clone https://github.com/UnityVerseBridge/mobile-app.git

# ì‹œê·¸ë„ë§ ì„œë²„
git clone https://github.com/UnityVerseBridge/signaling-server.git
```

### 2. Core íŒ¨í‚¤ì§€ ì„¤ì •

Unity Package Managerì—ì„œ ë¡œì»¬ íŒ¨í‚¤ì§€ë¡œ ì¶”ê°€:
1. Window > Package Manager
2. `+` ë²„íŠ¼ > "Add package from disk..."
3. `core/package.json` ì„ íƒ

ë˜ëŠ” git URLë¡œ ì¶”ê°€:
```
https://github.com/UnityVerseBridge/core.git
```

### 3. ì‹œê·¸ë„ë§ ì„œë²„ ì‹¤í–‰

```bash
cd signaling-server
npm install

# í™˜ê²½ ì„¤ì • (.env íŒŒì¼ ìƒì„±)
cp .env.example .env
# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ í¬íŠ¸ ì„¤ì •

node server.js
```

## ğŸ® ì‚¬ìš© ë°©ë²•

### ì—°ê²° ìˆœì„œ

1. **ì‹œê·¸ë„ë§ ì„œë²„ ì‹œì‘**
   ```bash
   cd signaling-server
   npm start
   ```

2. **Quest ì•± ì‹¤í–‰** (Offerer)
   - Quest í—¤ë“œì…‹ì—ì„œ ì•± ì‹œì‘
   - "ì—°ê²°" ë²„íŠ¼ í´ë¦­
   - ëª¨ë°”ì¼ ì•± ëŒ€ê¸°

3. **ëª¨ë°”ì¼ ì•± ì‹¤í–‰** (Answerer)
   - ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ì•± ì‹œì‘
   - "ì—°ê²°" ë²„íŠ¼ í´ë¦­
   - ìë™ìœ¼ë¡œ Questì™€ ì—°ê²°

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„¸

### Core íŒ¨í‚¤ì§€
```
core/
â”œâ”€â”€ Runtime/
â”‚   â”œâ”€â”€ WebRtcManager.cs          # WebRTC ì—°ê²° ê´€ë¦¬
â”‚   â”œâ”€â”€ SignalingClient.cs        # ì‹œê·¸ë„ë§ í†µì‹ 
â”‚   â”œâ”€â”€ ConnectionConfig.cs       # ì—°ê²° ì„¤ì •
â”‚   â””â”€â”€ DataChannel/              # ë°ì´í„° ì±„ë„ ê´€ë ¨
â””â”€â”€ Samples~/
    â””â”€â”€ SimpleConnection/         # ê¸°ë³¸ ì—°ê²° ì˜ˆì œ
```

### Quest App
```
quest-app/UnityProject/Assets/
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ VrStreamSender.cs         # ë¹„ë””ì˜¤ ì†¡ì‹ 
â”‚   â”œâ”€â”€ VrTouchReceiver.cs        # í„°ì¹˜ ìˆ˜ì‹ 
â”‚   â””â”€â”€ VrHapticRequester.cs      # í–…í‹± ìš”ì²­
â””â”€â”€ Scenes/
    â””â”€â”€ QuestStreamingDemo.unity  # ë©”ì¸ ì”¬
```

### Mobile App
```
mobile-app/UnityProject/Assets/
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ MobileVideoReceiver.cs    # ë¹„ë””ì˜¤ ìˆ˜ì‹ 
â”‚   â”œâ”€â”€ MobileInputSender.cs      # í„°ì¹˜ ì†¡ì‹ 
â”‚   â””â”€â”€ MobileHapticReceiver.cs   # í–…í‹± ìˆ˜ì‹ 
â””â”€â”€ Scenes/
    â””â”€â”€ MobileStreamingDemo.unity # ë©”ì¸ ì”¬
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ì¸ì¦ ê¸°ëŠ¥
ì‹œê·¸ë„ë§ ì„œë²„ëŠ” ê°„ë‹¨í•œ í† í° ê¸°ë°˜ ì¸ì¦ì„ ì§€ì›í•©ë‹ˆë‹¤.

**í˜„ì¬ êµ¬í˜„:**
- ê°„ë‹¨í•œ í† í° ìƒì„± ë° ê²€ì¦
- 24ì‹œê°„ ë§Œë£Œ ì‹œê°„
- ë©”ëª¨ë¦¬ ê¸°ë°˜ í† í° ì €ì¥

**í”„ë¡œë•ì…˜ ê¶Œì¥ì‚¬í•­:**
- JWT(JSON Web Token) ì‚¬ìš©
- ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬
- WSS (WebSocket Secure) ì‚¬ìš©
- HTTPS ì¸ì¦ì„œ ì„¤ì •

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### Quest ìµœì í™”
- **í”„ë ˆì„ ë ˆì´íŠ¸**: 72Hz ê¸°ë³¸, 90Hz ì˜µì…˜
- **ë Œë”ë§**: Fixed Foveated Rendering ì§€ì›
- **ìŠ¤íŠ¸ë¦¬ë° í•´ìƒë„**: 640x360 (ê¸°ë³¸), 1280x720, 1920x1080

### ëª¨ë°”ì¼ ìµœì í™”
- **í•˜ë“œì›¨ì–´ ë””ì½”ë”©**: GPU ê°€ì† í™œìš©
- **ë™ì  í•´ìƒë„**: ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê¸°ë°˜ ìë™ ì¡°ì •
- **ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬**: ì•± ì „í™˜ ì‹œ ë¦¬ì†ŒìŠ¤ ì ˆì•½

### ë„¤íŠ¸ì›Œí¬ ìµœì í™”
- **P2P ì§ì ‘ ì—°ê²°**: ìµœì†Œ ì§€ì—°ì‹œê°„
- **STUN ì„œë²„**: Googleì˜ ë¬´ë£Œ STUN ì„œë²„ ì‚¬ìš©
- **ì ì‘í˜• ë¹„íŠ¸ë ˆì´íŠ¸**: ë„¤íŠ¸ì›Œí¬ ìƒí™©ì— ë”°ë¥¸ í’ˆì§ˆ ì¡°ì •

## ğŸš§ í–¥í›„ ê°œë°œ ê³„íš

### ìš°ì„ ìˆœìœ„ ë†’ìŒ
- **ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° ì¶”ê°€**
- **AR ëª¨ë“œ ì§€ì›** (Quest 3 íŒ¨ìŠ¤ìŠ¤ë£¨)
- **VrStreamSender RemoveTrack êµ¬í˜„**

### ì¤‘ê°„ ìš°ì„ ìˆœìœ„
- **1:N ì—°ê²° ì§€ì›**
- **í´ë¼ìš°ë“œ ì‹œê·¸ë„ë§ ì„œë²„**
- **Unity 6 ìµœì í™”**

### ì¥ê¸° ê³„íš
- **WebXR í‘œì¤€ í†µí•©**
- **5G ë„¤íŠ¸ì›Œí¬ ìµœì í™”**
- **ë¶„ì„ ë° ëª¨ë‹ˆí„°ë§ ë„êµ¬**

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. ì´ ì €ì¥ì†Œë¥¼ Fork
2. ìƒˆ ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/AmazingFeature`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m 'Add some AmazingFeature'`)
4. ë¸Œëœì¹˜ì— Push (`git push origin feature/AmazingFeature`)
5. Pull Request ìƒì„±

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” BSD 3-Clause ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ‘¥ ì œì‘ì

- **kugorang** - *Initial work* - [GitHub](https://github.com/kugorang)

---

<p align="center">
  <b>UnityVerseBridge</b><br>
  <i>Bridging VR and Mobile Worlds with WebRTC</i><br>
  <br>
  <a href="https://github.com/UnityVerseBridge">GitHub Organization</a> â€¢ 
  <a href="https://github.com/UnityVerseBridge/UnityVerseBridge/wiki">Wiki</a> â€¢ 
  <a href="https://github.com/UnityVerseBridge/UnityVerseBridge/issues">Issues</a>
</p>